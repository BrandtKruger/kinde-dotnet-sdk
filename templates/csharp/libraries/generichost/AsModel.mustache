            // This logic may be modified with the AsModel.mustache template
            if (!IsSuccessStatusCode)
            {
                // Do not swallow non-success responses, but avoid leaking full bodies.
                const int MaxLoggedBodyChars = 2048;
                var bodyPreview = RawContent is null
                    ? null
                    : (RawContent.Length > MaxLoggedBodyChars
                        ? RawContent.Substring(0, MaxLoggedBodyChars) + "â€¦(truncated)"
                        : RawContent);
                // If a StatusCode value is available in scope, prefer the ctor that accepts it.
                throw new System.Net.Http.HttpRequestException(
                    "Non-success HTTP response." + (bodyPreview is null ? "" : $" Body (preview): {bodyPreview}")
                );
            }
            if (typeof(T) == typeof(string))
            {
                return (T)(object)RawContent;
            }
            if (string.IsNullOrWhiteSpace(RawContent) || RawContent.Trim().Equals("null", System.StringComparison.OrdinalIgnoreCase))
            {
                return default;
            }
            try
            {
                return System.Text.Json.JsonSerializer.Deserialize<T>(
                    RawContent,
                    _jsonSerializerOptions ?? new System.Text.Json.JsonSerializerOptions()
                );
            }
            catch (System.Text.Json.JsonException ex)
            {
                // Surface deserialization failures with context.
                throw new System.Text.Json.JsonException(
                    $"Failed to deserialize to {typeof(T).FullName}: {ex.Message}",
                    ex
                );
            }
